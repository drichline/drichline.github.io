<!doctype html><html lang=en><head><meta charset=utf-8><title>Revisiting the "Pi Business Card" | perilune.space</title><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=onion-location content="http://dakota3sjlgd5qt5nygektopktodk4krxw56xhkyzljhxuj3kroz5qqd.onion"><link rel=icon type=image/png href=/images/favicon.png><link href=/css/index.css rel=stylesheet><link rel=stylesheet href=/css/katex-0.12.0.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><script defer src=/js/katex-0.12.0.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=/js/auto-render-0.12.0.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body id=top><header><a href=/><span id=title>perilune.space</span></a><br><span id=subtitle>“Every one of us is, in the cosmic perspective, precious. If a human disagrees with you, let him live. In a hundred billion galaxies, you will not find another.”<br>― Carl Sagan, Cosmos</span></header><nav class=topnav><div id=navbar><label for=nav-toggle id=nav-button><img alt="Toggle navigation" src=/images/nav-toggle.svg></label>
<input id=nav-toggle type=checkbox>
<a class=logo href=/>Home</a>
<a href=/pages>Pages</a>
<a href=/about>About Me</a>
<a href=/resume.pdf>Resume</a>
<a href=https://www.qrz.com/db/kq6g/>Amateur Radio</a>
<a href=/contact>Contact</a></div></nav><main><div class=content><section><h1>Revisiting the "Pi Business Card"</h1><p>My math/programming skills have improved considerably since my <a href=/pages/picard>last post</a> on the topic, so I sat down and rewrote it in <a href=https://julialang.org/>Julia</a> (current favorite language). <em>TL;DR</em>: integrating \(\int^1_0 4\sqrt{1-x^2}dx\) is a really intuitive way to calculate the value of pi. I did it previously in Python using an awful (and certainly not &ldquo;badass&rdquo;) Riemann Sum that took hours to run.</p><p>I recently wrote a Simpson&rsquo;s 3/8 Rule approximation in MATLAB for an Aerospace Computational Techniques class, which only took a few minutes to translate into Julia&rsquo;s very similar syntax:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span><span style=color:#66d9ef>using</span> Printf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> simpson38(f<span style=color:#f92672>::</span><span style=color:#66d9ef>Function</span>, a, b, n)
</span></span><span style=display:flex><span>    h <span style=color:#f92672>=</span> (b <span style=color:#f92672>-</span> a) <span style=color:#f92672>/</span> n
</span></span><span style=display:flex><span>    x_i <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> h
</span></span><span style=display:flex><span>    x_j <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>h
</span></span><span style=display:flex><span>    x_k <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>h
</span></span><span style=display:flex><span>    I <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>h <span style=color:#f92672>*</span> (f(a) <span style=color:#f92672>+</span> f(b)) <span style=color:#f92672>/</span> <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> ctr <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>n<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        I <span style=color:#f92672>=</span> I <span style=color:#f92672>+</span> <span style=color:#ae81ff>9</span>h <span style=color:#f92672>*</span> f(x_i) <span style=color:#f92672>/</span> <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>        x_i <span style=color:#f92672>=</span> x_i <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>h
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> ctr <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span><span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>n<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        I <span style=color:#f92672>=</span> I <span style=color:#f92672>+</span> <span style=color:#ae81ff>9</span>h <span style=color:#f92672>*</span> f(x_j) <span style=color:#f92672>/</span> <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>        x_j <span style=color:#f92672>=</span> x_j <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>h
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> ctr <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>n<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>        I <span style=color:#f92672>=</span> I <span style=color:#f92672>+</span> <span style=color:#ae81ff>6</span>h <span style=color:#f92672>*</span> f(x_k) <span style=color:#f92672>/</span> <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>        x_k <span style=color:#f92672>=</span> x_k <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>h
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> I
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f(x) <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>sqrt(abs(<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> x<span style=color:#f92672>^</span><span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>n <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> length(ARGS) <span style=color:#f92672>!=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	err <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;1e-10&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	err <span style=color:#f92672>=</span> (parse(<span style=color:#66d9ef>Float64</span>, ARGS[<span style=color:#ae81ff>1</span>]))
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> true
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>global</span> I<span style=color:#f92672>::</span><span style=color:#66d9ef>Float64</span> <span style=color:#f92672>=</span> simpson38(f, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, n)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>global</span> E <span style=color:#f92672>=</span> abs(pi <span style=color:#f92672>-</span> I)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> E <span style=color:#f92672>&lt;</span> err
</span></span><span style=display:flex><span>    	<span style=color:#a6e22e>@printf</span> <span style=color:#e6db74>&#34;pi: </span><span style=color:#e6db74>%1.10f</span><span style=color:#e6db74> Segments: </span><span style=color:#e6db74>%i</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>Error: </span><span style=color:#e6db74>%.1e</span><span style=color:#e6db74>&#34;</span> I n E <span style=color:#75715e>#pi - simpson38(f, 0, 1, n)</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>global</span> n <span style=color:#f92672>=</span> n <span style=color:#f92672>*</span> log(n)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>pi: 3.1415926537 Segments: 13980175
</span></span><span style=display:flex><span>Error: 1.2e-10</span></span></code></pre></div><p>Unfortunately, it hangs when err is set below 1e-10 and I can&rsquo;t figure out why</p><p>Last modified: 2024-07-17</p></section></div></main><footer><span>&copy;2018-2025 Dakota Richline </span><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=border-width:0 src=/images/80x15.png></a><br><span><i>Ad Astra Per Scientiam!</i></span></footer></body></html>